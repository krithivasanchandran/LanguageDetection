package com.locdata.realestate.commercialproperty.scraper;

import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.util.LinkedHashSet;
import java.util.Set;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

import com.locdata.scraper.main.ScraperLogic;
import com.locdata.utils.common.CommonUtils;

public class RealEst_TangerOutlets_LocData {

static Set<String> esturl = new LinkedHashSet<String>();
	
	public static void main(String args[]) throws IOException {
		
		String parentUrl = "https://www.tangeroutlet.com";

		Document doc = ScraperLogic.Scraper.fetchHtmlContents("https://www.tangeroutlet.com/locations");

		CommonUtils.checkDoc(doc,RealEst_TangerOutlets_LocData.class);
			
		Elements t = doc.select("div#centerIndexList");
		
		for (Element r : t) {

			Elements re = r.select(".row");
			
			for (Element k : re) {
				
				for(Element kk : k.getElementsByTag("address")){
					//System.out.println("Address --->  "+ kk.select(".centerLocation").text());
					//System.out.println(" Website ------> " + parentUrl.concat(kk.getElementsByTag("a").attr("href")));
					esturl.add(parentUrl.concat(kk.getElementsByTag("a").attr("href")));
				}
				//System.out.println(" Hours --------> " + k.getElementsByTag("dl").text());
			}
		}
		esturl.forEach((action) -> {
			
			URL url;
			try {
				url = new URL("https://www.tangeroutlet.com/daytona/stores");
				InputStream is = url.openStream();  // throws an IOException
				Document document = Jsoup.connect(url)
						.userAgent(
								"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.108 Safari/537.36")
						.timeout(100000)
						 .maxBodySize(0)
						.followRedirects(true)
						 .ignoreContentType(true)
						.get();
				

			       
				CommonUtils.checkDoc(document,RealEst_TangerOutlets_LocData.class);
				System.out.println(document.body().text());
			} catch (Exception e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
			
//			Elements dt = document.select(".container");
//			
//			for (Element r : dt) {
//
//				Elements re = r.select(".row.store-directory");
//				
//				for (Element k : re) {
//					
//					for(Element kk : k.select(".row")){
//						System.out.println("store-brand --->  "+ kk.select(".col-xs-12 .store-brand").text());
//						System.out.println("store-number ------> " + kk.select(".col-xs-12.store-number"));
//						System.out.println("store-phone ------> " + kk.select(".col-xs-12 > .store-phone"));
//					}
//				}
//			}
		});
	}
}