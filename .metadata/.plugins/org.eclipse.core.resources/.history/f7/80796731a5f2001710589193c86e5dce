package com.locdata.realestate.commercialproperty.scraper;

import java.io.File;
import java.io.IOException;
import java.util.HashSet;
import java.util.Set;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

import com.locdata.scraper.main.ScraperLogic;
import com.locdata.utils.common.CommonUtils;

// A total different requires to be take a copy of the html to the local

public class RealEst_PremiumOutlet_LocData {

static Set<String> esturl = new HashSet<String>();
	
	public static void main(String args[]) throws IOException {
		
		File input = new File("./temp/simon.html");
		Document doc = Jsoup.parse(input, "UTF-8", "http://www.simon.com/mall");

		Elements re = doc.select("main#simon");
		
		for(Element d : re){
			Elements web = d.select(".col-xl-4.col-md-6");
			for(Element n : web){
				System.out.println("Website ----------> " + n.getElementsByTag("a").attr("href").concat("/about"));
				esturl.add(n.getElementsByTag("a").attr("href").concat("/about"));
				esturl.add(n.getElementsByTag("a").attr("href").concat("/hours"));
			}
		}
			
		if(esturl.size() > 0){
			esturl.forEach((action) -> {
				
				if(action.contains("/about")){
					
					Document document = ScraperLogic.Scraper.fetchHtmlContents(action);
					CommonUtils.checkDoc(document,RealEst_PremiumOutlet_LocData.class);

					for(Element ti : document.select("main#simon")){
						System.out.println("Address --------> " + ti.getElementsByTag("h5").text());
					}
					String contact = document.getElementsByTag("aside").select(".aside-group").first().getElementsByTag("p").text();
					System.out.println( "Phone --> " + contact);
				}
				
				if(action.contains("/hours")){
					
					Document document = ScraperLogic.Scraper.fetchHtmlContents(action);
					CommonUtils.checkDoc(document,RealEst_PremiumOutlet_LocData.class);
					

					for(Element ti : document.select("main#simon")){	
						
						Elements a1 = ti.select(".col-md-12.no-gutter-mobile");
						
						for(Element d: a1){
							System.out.println("Week --------> " + d.select(".hour-day.bold.pull-sm-left").text());
							System.out.println("Hours Open =========>" + d.select("hour-time pull-sm-right").text());
						}
					}
				 }
				
				

			});
		}
}
}